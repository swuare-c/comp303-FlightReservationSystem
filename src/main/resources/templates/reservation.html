<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Book Flight</title>
</head>
<body>
<div>
    <h2>Book Flight</h2>

    <!-- Step 1: Select Airline -->
    <form th:action="@{/reservation}" method="get">
        <label>Select Airline:</label>
        <select name="airline">
            <option value="Air Canada" th:selected="${param.airline == 'Air Canada'}">Air Canada</option>
            <option value="American Airlines" th:selected="${param.airline == 'American Airlines'}">American Airlines</option>
            <option value="Air Transat" th:selected="${param.airline == 'Air Transat'}">Air Transat</option>
            <option value="WestJet" th:selected="${param.airline == 'WestJet'}">WestJet</option>
            <option value="Jet Blue" th:selected="${param.airline == 'Jet Blue'}">Jet Blue</option>
            <option value="Virgin Atlantic" th:selected="${param.airline == 'Virgin Atlantic'}">Virgin Atlantic</option>
        </select>
        <button type="submit">Continue</button>
    </form>

    <!-- Step 2: Flight + Reservation Form -->
    <div th:if="${param.airline}">
        <form th:action="@{/reservation}" method="post">

            <h3>Enter Flight and Reservation Details</h3>

            <!-- Flight Fields -->
            <label>Airline:</label>
            <input type="text" name="airline" th:value="${param.airline}" readonly>

            <label>Origin:</label>
            <input type="text" name="origin" placeholder="Enter origin" required>

            <label>Destination:</label>
            <input type="text" name="destination" placeholder="Enter destination" required>

            <label>Departure Time:</label>
            <input type="time" name="departureTime" required>

            <label>Arrival Time:</label>
            <input type="time" name="arrivalTime" required>

            <!-- Reservation Fields -->
            <label>Departure Date:</label>
            <input type="date" name="departureDate" required>

            <label>Number of Passengers:</label>
            <input type="number" id="no_of_passengers" name="no_of_passengers" min="1" max="9" required>
            
            <!-- Hidden fields -->
            <input type="hidden" name="booking_date">
            <input type="hidden" name="status">
            <input type="hidden" name="total_price">
            <input type="hidden" name="price">
            <input type="hidden" name="reservation_id">

            <button type="submit">Book Flight</button>
        </form>
    </div>
</div>